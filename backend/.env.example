###############################################
# 环境变量示例 (.env.example)
#
# 用法：复制为 .env 并按需修改。所有布尔值写成小写字符串 true/false。
# 注意：本文件仅为示例，切勿把真实密钥提交到仓库。
# 兼容：Linux/Windows（路径与端口配置对两者均适用）。
###############################################

## —— 1) 应用基础 ——
# 运行环境：development | production
NODE_ENV=development

# 后端监听端口
PORT=3001

## —— 2) 服务地址 / 二维码访问地址 ——
# BASE_URL：二维码/前端访问的基础地址；优先级高于 DOMAIN。
# 生产建议使用正式域名 + HTTPS；开发可使用局域网IP或localhost+端口。
# 示例（三选一，去掉注释后使用其一）：
#   https://example.com
#   http://192.168.1.100:3001
#   http://localhost:3001
BASE_URL=

# DOMAIN：当未设置 BASE_URL 时，用 DOMAIN 推导基础地址。
# 在生产环境会默认使用 https:// 协议；开发环境会保留 http:// 并在缺端口时自动补 5173。
DOMAIN=

# 强制使用 HTTPS（两者任一为 true 即强制）
FORCE_HTTPS=false
ALWAYS_HTTPS=false

# 开发模式下用于推断前端端口（Vite/React）
FRONTEND_PORT=5173
VITE_PORT=5173

## —— 3) 数据库 ——
# SQLite 示例（相对 backend 目录存放到 ../data）
DATABASE_URL=file:../data/fire_safety.db

## —— 4) 认证 / JWT ——
# 访问令牌密钥（示例占位符，实际请替换）：
JWT_SECRET=your-jwt-secret-here
# 刷新令牌密钥（示例占位符）：
JWT_REFRESH_SECRET=your-jwt-refresh-secret-here
# 访问令牌有效期（如 24h、7d）
JWT_EXPIRES_IN=24h
# 刷新令牌有效期（如 30d）
REFRESH_TOKEN_EXPIRES_IN=30d
# 记住我（长期刷新令牌）有效期（如 90d）
LONG_REFRESH_TOKEN_EXPIRES_IN=90d

## —— 5) CORS 跨域 ——
# 允许的来源（逗号分隔）。开发默认常用端口已内置于代码，但建议显式配置。
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,http://localhost:5173
# 允许局域网来源（仅开发调试时开启，生产谨慎）
CORS_ALLOW_LOCAL_NETWORK=false

## —— 6) 速率限制（生产环境生效） ——
# 窗口期（毫秒），默认15分钟=900000
RATE_LIMIT_WINDOW_MS=900000
# 窗口期内允许的最大请求数
RATE_LIMIT_MAX_REQUESTS=100

## —— 7) 报表下载直链签名 ——
# 签名密钥（不设置则回退至 JWT_SECRET）
DOWNLOAD_TOKEN_SECRET=
# Token有效期（秒），默认600=10分钟
DOWNLOAD_TOKEN_TTL=600

## —— 8) 邮件通知（可选） ——
# SMTP 基础配置
SMTP_HOST=smtp.qq.com
SMTP_PORT=587
# 465 通常为 true，其它端口通常为 false
SMTP_SECURE=false
# 发信邮箱与授权码（未配置时进入“模拟模式”，仅打印，不实际发送）
SMTP_USER=
SMTP_PASS=
# 发件人显示（可不填，默认为 SMTP_USER）
SMTP_FROM="消防器材点检系统 <system@fire-safety.com>"
# 默认告警接收人，逗号分隔多个邮箱
ALERT_RECIPIENTS=

## —— 9) 调试/可选 ——
# 二维码相关调试日志开关
QR_DEBUG=false
# 启用数据清理计划任务（1/true 启用）
SCHEDULER_ENABLED=false
# 客户端日志上报接口鉴权 Token（若留空则不上锁）
CLIENT_LOG_TOKEN=

# 备注：
# - 未在代码中使用的变量已移除（如 UPLOAD_*、QR_CODE_*、LOG_LEVEL 等），避免误导。
# - 如需通过系统设置（数据库）配置二维码基础地址，请在“系统设置”中填写 key=qr_base_url。
