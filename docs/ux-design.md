# 消防器材点检管理系统 - UX/UI 设计文档 (UX-design.md)

## 1. 设计哲学 (Design Philosophy)

本系统的用户界面(UI)和用户体验(UX)设计遵循以下三大原则：

1.  **效率优先 (Efficiency First)**: 用户的操作路径应尽可能短，信息获取要直观快速。尤其对于一线点检员的移动端操作，必须减少不必要的点击和页面跳转。
2.  **清晰明确 (Clarity & Unambiguity)**: 界面元素、状态信息（如正常、异常、待处理）必须一目了然，避免产生歧义。通过颜色、图标和文字的组合，清晰地传达信息。
3.  **可靠专业 (Reliable & Professional)**: 整体风格应简洁、专业，符合安全管理软件的定位。避免不必要的装饰，建立用户对系统的信任感。

## 2. 视觉风格 (Visual Style)

-   **色彩体系**:
    -   **主色 (Primary)**: 蓝色 `#3B82F6`。用于主要按钮、链接、导航高亮，代表专业与可靠。
    -   **成功色 (Success)**: 绿色 `#22C55E`。用于表示“正常”、“已完成”、“审核通过”等积极状态。
    -   **警告/异常色 (Warning/Destructive)**: 红色 `#EF4444` 或 橙色 `#F97316`。用于表示“异常”、“待处理”、“删除”等需要用户高度关注的状态。
    -   **背景/中性色**: 使用不同深浅的灰色 (`slate` 或 `gray` from Tailwind CSS) 构建界面的层次感。

-   **字体排印 (Typography)**:
    -   使用无衬线字体（如 Inter, Source Han Sans），确保在各种屏幕尺寸上的可读性。
    -   信息层级通过字号、字重和颜色的对比来体现。

-   **组件库**:
    -   所有UI组件均基于 **shadcn/ui** 实现，确保视觉风格和交互行为的高度统一。

## 3. 核心用户旅程与页面设计 (Core User Journeys & Page Designs)

### 3.1 手机网页端 (一线点检员)

**设计目标**: 快速、简单、适合户外单手操作。

**整体布局**: 单列布局，垂直滚动。按钮和交互元素尺寸要足够大，易于点击。

---

**页面流程图:**

```mermaid
graph TD
    A[登录页] --> B{登录成功?};
    B -- 是 --> C[主页];
    B -- 否 --> A;
    C -- 点击"扫码点检" --> D[扫码界面];
    D -- 扫码成功 --> E[点检表单页];
    E -- 填写表单 --> F{是否有异常?};
    F -- 否 --> G[提交成功提示];
    F -- 是 --> H[补充异常信息];
    H --> G;
    G --> C;
```

---

**页面详细设计:**

1.  **登录页 (`/login`)**
    -   **元素**: Logo、系统标题、用户名输入框、密码输入框、"登录"按钮。
    -   **交互**: 输入框获得焦点时应有视觉提示。登录按钮为蓝色主色，点击后显示加载状态（Loading Spinner）。

2.  **主页 (`/m/dashboard`)**
    -   **元素**: 顶部显示欢迎信息（“欢迎您，[点检员姓名]”）。页面中央放置一个巨大、醒目的 **“扫码点检”** 按钮（使用主色，并可附带一个二维码图标）。下方可以简洁地展示今日已检数量。
    -   **交互**: 点击“扫码点检”按钮，调用摄像头。

3.  **点检表单页 (`/m/inspection/[id]`)**
    -   **布局**: 页面从上到下依次为：
        1.  **器材信息卡片 (Card)**: 顶部固定显示本次点检的器材核心信息（编号、类型、位置）。
        2.  **点检项列表**:
            -   每个点检项为一行，左侧为检查内容文字，右侧为 **“正常”** / **“异常”** 的切换开关 (Switch) 或分段控件 (Segmented Control)。
            -   默认所有项均为“正常”（绿色）。当切换到“异常”时，该项背景变为浅红色，并自动在该项下方展开“问题描述”文本框和“上传问题图片”按钮。
        3.  **现场凭证照片**:
            -   一个标题为“点检照片 (必传)”的区域。
            -   一个“点击上传/拍照”按钮，上传后显示缩略图，并可点击删除重传。
        4.  **提交按钮**: 页面底部一个全宽的蓝色 **“确认提交”** 按钮。
    -   **交互**:
        -   当存在“异常”项且未填写描述或上传图片时，“确认提交”按钮为禁用状态。
        -   所有必填项完成后，按钮变为可用。点击后显示加载状态，提交成功后显示一个全局提示 (Toast)：“点检记录提交成功”，并自动跳转回主页。

### 3.2 电脑管理端 (管理员)

**设计目标**: 信息密度高、数据可视化、操作流程闭环。

**整体布局**: 经典的后台管理布局，左侧为固定导航菜单，右侧为主要内容区域。

---

**页面详细设计:**

1.  **数据看板 (`/dashboard`)**
    -   **布局**: 采用栅格布局，由多个卡片 (Card) 组成。
    -   **组件**:
        -   **核心指标 (Stat Cards)**: 顶部放置4个突出的数据卡片，显示“器材完好率”、“待处理隐患数”、“今日点检数”、“即将过期器材数”。
        -   **图表 (Charts)**: 使用图表库（如 Recharts）展示“各厂区隐患数量分布”（柱状图）、“器材类型占比”（饼图）。
        -   **快捷入口**: 提供“新增器材”、“处理隐患”等常用操作的快捷链接。

2.  **器材管理 (`/equipments`)**
    -   **布局**: 顶部为操作区，下方为数据表格。
    -   **组件**:
        -   **操作区**: “新增器材”按钮、搜索框、基于器材类型和厂区的筛选器 (Dropdown/Select)。
        -   **数据表格 (DataTable)**:
            -   **列**: 器材编号, 类型, 规格, 厂区, 位置, 状态 (使用徽章`Badge`组件，根据正常/异常显示不同颜色), 有效截止日期, 操作。
            -   **交互**: 支持列排序。每行的“操作”列包含“编辑”、“删除”、“打印二维码”按钮。点击“新增”或“编辑”时，使用模态框 (Dialog) 弹出表单，而不是跳转页面。

3.  **隐患管理 (`/issues`)**
    -   **布局**: 类似于看板 (Kanban) 或列表视图，让处理流程可视化。
    -   **组件**:
        -   **视图切换**: 提供“待处理”、“待审核”、“已关闭”的标签页 (Tabs) 进行筛选。
        -   **隐患列表/卡片**:
            -   每一条隐患以卡片形式展示，包含关键信息：器材编号、位置、异常描述、上报人、上报时间。卡片左侧用不同颜色的竖线标记紧急程度。
            -   卡片右下角有一个 **“处理”** 或 **“审核”** 按钮。
    -   **交互 (处理流程)**:
        1.  厂区管理员在“待处理”列表点击“处理”。
        2.  弹出模态框 (Dialog)，左侧展示点检员上报的异常信息和图片，右侧提供表单给管理员填写“整改措施说明”并上传“整改后照片”。
        3.  提交后，该隐患卡片从未处理列表消失，出现在超级管理员的“待审核”列表中。
        4.  超级管理员点击“审核”，在模态框中查看所有信息，并点击 **“审核通过”** 或 **“驳回”**。

4.  **点检记录 (`/records`)**
    -   **布局**: 功能强大的数据筛选和展示页面。
    -   **组件**:
        -   **高级筛选区**: 提供日期范围选择器 (Date Range Picker)、厂区筛选、点检员筛选、点检结果筛选等。
        -   **数据表格 (DataTable)**: 显示每一次点检的摘要信息。提供“查看详情”按钮。
    -   **交互**: 点击“查看详情”，在模态框或新页面展示该次点检的所有信息，包括所有点检项的“正常/异常”状态和所有上传的照片。

## 4. 通用组件与交互规范

-   **表单 (Forms)**: 所有输入框、选择器都应有清晰的标签 (Label)。必填项需有星号 `*` 标记。验证失败时，在对应表单项下方显示红色错误提示信息。
-   **通知 (Notifications)**: 使用全局Toast组件（右上角弹出）来反馈操作结果（如“保存成功”、“删除失败”）。
-   **确认对话框 (Alert Dialog)**: 对于删除等破坏性操作，必须使用`AlertDialog`组件弹出二次确认框，防止用户误操作。
-   **加载状态 (Loading States)**: 获取数据时，表格和卡片区域应显示骨架屏 (Skeleton) 或加载指示器 (Spinner)，按钮在执行操作时应显示加载状态并被禁用。